---
title: "Lesson 5"
subtitle: "Intermediate programming for data science"
author: "JMG"
format:
  html:
    echo: true
    code-fold: false
    code-summary: "Show the code"
    toc: true
    toc-location: left
bibliography: lesson05.bib
license: "CC BY-NC-SA 4.0"
---



## Learning Objectives

After this lesson, students will be able to: 

- Write functions in R.

- Use `map` and other such functions from `purrr` for iteration. 


## Readings, etc.

For this lesson, refer to the following readings, etc.:

- [Chapter 26](https://r4ds.hadley.nz/functions) from [R for Data Science](https://r4ds.hadley.nz/) [@wickham2023r]. [View Chapter 26](https://r4ds.hadley.nz/functions).

- [Chapter 27](https://r4ds.hadley.nz/iteration) from [R for Data Science](https://r4ds.hadley.nz/) [@wickham2023r]. [View Chapter 27](https://r4ds.hadley.nz/iteration).


## Overview

Computer programming is the art and science of instructing computers to perform specific tasks or solve problems. It's like giving step-by-step directions to a computer to execute. Programmers use programming languages, which are like the computer's communication tools, to write code. This code is a set of instructions that tells the computer what to do. In the world of data science, programming is an essential skill because it allows you to manipulate, analyze, and visualize data efficiently. Learning to code empowers you to create software, build data models, and automate repetitive tasks, making it a fundamental skill for anyone aspiring to excel in the field of data science.

Two of the most important programming concepts are iteration and functions. Both **iteration** and **functions** save us time, iterations by allowing us to perform repetitive tasks without repeating command, and  **functions** by allowing us to generalize commands/code. In data science, iteration and functions are critical for tasks like data cleaning, analysis, and visualization. They enable you to process and analyze large datasets efficiently while maintaining clean, organized, and readable code.

In this lesson, we will learn how to implement functions and certain types of iteration in R. 


## `r icons::icon_style(icons::fontawesome("r-project"),scale=2,fill="steelblue")` Functions in R


1. Reusability: Functions in R allow you to encapsulate logic and reuse it throughout your code. This promotes code modularity, reduces redundancy, and simplifies maintenance.

2. Abstraction: Functions provide a level of abstraction, allowing you to focus on what a piece of code does rather than how it does it. This enhances code readability and comprehension.

3. Scoping: Lexical scoping in R enables functions to maintain their own environments, which is useful for creating closures and encapsulating state.

4. Extensibility: R's extensibility through user-defined functions enables you to tailor your code to specific tasks or domains, making it a versatile language for data analysis and statistics.

5. Error Handling: Functions in R can include error-handling mechanisms to gracefully handle unexpected situations, enhancing the robustness of your code.

6. Testing: Functions make it easier to write unit tests for your code, ensuring its correctness and reliability in data analysis pipelines.

7. Functional Programming: R supports functional programming paradigms, allowing you to use higher-order functions like `apply`, `lapply`, and `sapply`, which simplify data manipulation and analysis tasks. Further, the packages `purrr` and `furrr` enhance the use of functional programming in R.






## `r icons::icon_style(icons::fontawesome("r-project"),scale=2,fill="steelblue")` Iteration with `purrr`

Functional programming, as implemented in R using packages like `purrr`, offers several advantages that make it particularly useful in data science:

1. Readability and Maintainability: Functional programming encourages writing code that is concise and easier to understand. It emphasizes the use of pure functions, which take inputs and produce outputs without modifying external state. This makes code more predictable and less prone to bugs, making it easier to maintain, especially in data science projects where the logic can become complex.

2. Modularity: Functional programming promotes modularity by breaking down complex operations into smaller, reusable functions. In data science, where you often perform similar data manipulations or analyses on different datasets, this modularity can save time and effort by allowing you to reuse code snippets efficiently.

3. Immutability: In functional programming, data is treated as immutable, meaning once created, it cannot be changed. Instead of modifying existing data, you create new data structures. In data science, this can help ensure data integrity and traceability, crucial for reproducible research.

4. Parallelization: Functional programming encourages the use of pure functions that don't rely on external state or side effects. This property makes it easier to parallelize code, taking advantage of multi-core processors for faster data processing, a significant benefit in data science, where working with large datasets can be time-consuming. The `future` and `furrr` packages implement parallel processing versions of the `map` family of functions. 

5. Error Handling: Functional programming encourages a more structured approach to error handling,  leading to more robust and predictable error handling in data analysis pipelines.

6. Functional Pipelines: Functional programming promotes the use of pipelines, where data flows through a series of transformations. This aligns well with the typical data preprocessing and analysis steps in data science. Libraries like purrr in R make it easy to build and read such pipelines, enhancing code clarity.

7. Data Transformation: In data science, you often need to perform various transformations on data, such as mapping, filtering, and summarizing. Functional programming's emphasis on these operations aligns well with the typical tasks in data cleaning and preprocessing.

8. Functional Libraries: R has a rich ecosystem of packages like `purrr`, `dplyr`, and `tidyr` that are designed with functional programming principles in mind. These packages provide powerful tools for data manipulation and analysis while promoting clean, readable code.


## Preparation for the next lesson

To prepare for the next lesson, please read:

- [Chapter 10](https://datasciencebook.ca/inference.html) on statistical inference from [Data Science A First Introduction](https://datasciencebook.ca/preface.html) [@timbers2022data].


## References

::: {#refs}
:::


:::{.callout-tip collapse="true"}
## Expand for Session Info
```{r}
#| echo: false


library(sessioninfo)
# save the session info as an object
pkg_sesh <- session_info(pkgs = "attached")

# get the quarto version
quarto_version <- system("quarto --version", intern = TRUE)

# inject the quarto info
pkg_sesh$platform$quarto <- paste(
  system("quarto --version", intern = TRUE), 
  "@", 
  quarto::quarto_path()
  )

# print it out
pkg_sesh
```

:::


[![](http://mirrors.creativecommons.org/presskit/buttons/88x31/png/by-nc-sa.png?raw=1){fig-align="left" width=15%}](https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode)


