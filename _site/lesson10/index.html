<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="JMG">

<title>DS 201 - Lesson 10</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../site_libs/vembedr-0.1.5/css/vembedr.css" rel="stylesheet">


<link rel="stylesheet" href="../styles.css">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">DS 201</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../syllabus.html" rel="" target="">
 <span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../links.html" rel="" target="">
 <span class="menu-text">Links</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/jmgraham30/ds_201_site" rel="" target=""><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#ethical-considerations-in-data-science" id="toc-ethical-considerations-in-data-science" class="nav-link" data-scroll-target="#ethical-considerations-in-data-science">Ethical Considerations in Data Science</a></li>
  <li><a href="#examples-of-ethical-issues-in-data-science" id="toc-examples-of-ethical-issues-in-data-science" class="nav-link" data-scroll-target="#examples-of-ethical-issues-in-data-science">Examples of Ethical Issues in Data Science</a></li>
  <li><a href="#some-ways-to-address-ethical-issues-in-data-science" id="toc-some-ways-to-address-ethical-issues-in-data-science" class="nav-link" data-scroll-target="#some-ways-to-address-ethical-issues-in-data-science">Some Ways to Address Ethical Issues in Data Science</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lesson 10</h1>
<p class="subtitle lead">Ethical Considerations in Data Science</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>JMG </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p><a href="https://youtu.be/s8qjmImu1LQ?si=Ywl7Ebpx1mc9ZVuO">Watch <em>Why develop a data science code of ethics?</em> video on YouTube</a>.</p>
<div class="cell">
<div class="cell-output-display">
<div class="vembedr" align="center">
<div>
<iframe src="https://www.youtube.com/embed/s8qjmImu1LQ?si=Ywl7Ebpx1mc9ZVuO" width="800" height="450" frameborder="0" allowfullscreen="" data-external="1"></iframe>
</div>
</div>
</div>
</div>
<p>In this lesson, we will learn about some of the ethical considerations of data science. We will explore the potential risks of algorithmic bias and the importance of data transparency and accountability. We will also examine the ethical implications of using data for targeted advertising, political influence, and other manipulative purposes. Finally, we will investigate the ethical considerations surrounding the use of artificial intelligence in healthcare.</p>
<p>We begin with an interactive activity. Take a moment to think about the following questions:</p>
<ul>
<li>What are some of the ethical considerations relevant to data science?</li>
</ul>
<p>Think of some one or two word answers to this question. Then, add your answers to the word cloud activity displayed momentarily.</p>
<p><a href="https://youtu.be/gV0_raKR2UQ?si=oCyVg8a7bmlLiN8-">Watch <em>Algorithmic Bias and Fairness</em> video on YouTube</a>.</p>
<div class="cell">
<div class="cell-output-display">
<div class="vembedr" align="center">
<div>
<iframe src="https://www.youtube.com/embed/gV0_raKR2UQ?si=oCyVg8a7bmlLiN8-" width="800" height="450" frameborder="0" allowfullscreen="" data-external="1"></iframe>
</div>
</div>
</div>
</div>
</section>
<section id="ethical-considerations-in-data-science" class="level2">
<h2 class="anchored" data-anchor-id="ethical-considerations-in-data-science">Ethical Considerations in Data Science</h2>
<ol type="1">
<li><strong>Algorithmic Bias:</strong>
<ul>
<li><strong>Prompt:</strong> Investigate a case where algorithmic bias has had significant real-world consequences. Discuss the impact on individuals or groups and consider the ethical implications of biased algorithms in decision-making processes.</li>
<li><strong>Resource:</strong> <a href="https://www.datacamp.com/community/tutorials/algorithmic-bias-primer">Algorithmic Bias: A Primer and Exploration</a></li>
</ul></li>
<li><strong>Privacy and Data Collection:</strong>
<ul>
<li><strong>Prompt:</strong> Examine a situation where large-scale data collection has raised privacy concerns. Explore how the collected data was used and the potential consequences for individuals. Discuss the ethical considerations of balancing data-driven insights with the need to protect privacy.</li>
<li><strong>Resource:</strong> <a href="https://towardsdatascience.com/privacy-in-data-science-76361c272f42">Privacy in Data Science</a></li>
</ul></li>
<li><strong>Predictive Policing:</strong>
<ul>
<li><strong>Prompt:</strong> Explore the ethical implications of using predictive analytics in law enforcement. Discuss the potential biases and social implications of relying on algorithms to predict criminal behavior. Consider the impact on marginalized communities and the potential for reinforcing existing inequalities.</li>
<li><strong>Resource:</strong> <a href="https://www.brookings.edu/research/the-ethics-of-predictive-policing/">The Ethics of Predictive Policing</a></li>
</ul></li>
<li><strong>Data Transparency and Accountability:</strong>
<ul>
<li><strong>Prompt:</strong> Research a case where lack of transparency in data collection or model development has led to controversy. Discuss the importance of transparency in data science, the potential risks of opaque algorithms, and the ethical responsibility of data scientists to ensure accountability.</li>
<li><strong>Resource:</strong> <a href="https://arxiv.org/abs/2011.11847">Towards Transparent AI/ML: A Survey of Techniques</a></li>
</ul></li>
<li><strong>Social Media and Manipulation:</strong>
<ul>
<li><strong>Prompt:</strong> Analyze a situation where social media data has been used for manipulation or misinformation. Explore the ethical considerations of using data for targeted advertising, political influence, or other manipulative purposes. Discuss the responsibility of data scientists in preventing the misuse of data.</li>
<li><strong>Resource:</strong> <a href="https://datasociety.net/pubs/ia/DataAndSociety_Social_Media_Manipulation_2018.pdf">The Ethics of Social Media Data Use</a></li>
</ul></li>
<li><strong>Ethical Use of AI in Healthcare:</strong>
<ul>
<li><strong>Prompt:</strong> Investigate the ethical considerations surrounding the use of artificial intelligence in healthcare. Explore issues such as patient consent, data security, and the potential biases in healthcare algorithms. Discuss the balance between using data for medical advancements and ensuring the well-being and privacy of patients.</li>
<li><strong>Resource:</strong> <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7215227/">Ethical Challenges of AI in Healthcare</a></li>
</ul></li>
</ol>
</section>
<section id="examples-of-ethical-issues-in-data-science" class="level2">
<h2 class="anchored" data-anchor-id="examples-of-ethical-issues-in-data-science">Examples of Ethical Issues in Data Science</h2>
<ol type="1">
<li><strong>Facebook-Cambridge Analytica Scandal (2018):</strong></li>
</ol>
<ul>
<li><strong>Description:</strong> The improper use of Facebook user data by Cambridge Analytica for political advertising purposes, leading to concerns about user privacy and data manipulation.</li>
<li><strong>Resource:</strong> <a href="https://www.bbc.com/news/technology-43465968">Cambridge Analytica: What we know so far</a></li>
</ul>
<ol start="2" type="1">
<li><strong>Predictive Policing Bias in the United States:</strong>
<ul>
<li><strong>Description:</strong> Instances where predictive policing algorithms demonstrated biases, potentially leading to discrimination against specific communities and reinforcing existing racial disparities.</li>
<li><strong>Resource:</strong> <a href="https://www.scientificamerican.com/article/the-perils-of-predictive-policing/">The Perils of Predictive Policing</a></li>
</ul></li>
<li><strong>Google Photos Mislabeling:</strong>
<ul>
<li><strong>Description:</strong> Google Photos’ image recognition system mislabeling photos of people, including categorizing individuals of certain ethnicities as animals, highlighting issues of bias in machine learning models.</li>
<li><strong>Resource:</strong> <a href="https://www.theverge.com/2015/7/1/8880363/google-apologizes-racially-insensitive-image-recognition">Google Photos, racial bias, and flawed machine learning</a></li>
</ul></li>
<li><strong>ProPublica’s Analysis of COMPAS (Correctional Offender Management Profiling for Alternative Sanctions):</strong>
<ul>
<li><strong>Description:</strong> ProPublica’s investigation into the COMPAS algorithm used in criminal sentencing, revealing racial bias and disparities in the risk scores assigned to individuals.</li>
<li><strong>Resource:</strong> <a href="https://www.propublica.org/article/machine-bias-risk-assessments-in-criminal-sentencing">Machine Bias</a></li>
</ul></li>
<li><strong>Amazon’s Gender-Biased Recruitment Tool:</strong>
<ul>
<li><strong>Description:</strong> Amazon’s AI-based recruitment tool favoring male candidates over female candidates, raising concerns about gender bias in the hiring process.</li>
<li><strong>Resource:</strong> <a href="https://www.reuters.com/article/us-amazon-com-jobs-automation-insight-idUSKCN1MK08G">Amazon scraps secret AI recruiting tool that showed bias against women</a></li>
</ul></li>
<li><strong>COVID-19 Contact Tracing Privacy Concerns:</strong>
<ul>
<li><strong>Description:</strong> Privacy concerns arising from the use of contact tracing apps during the COVID-19 pandemic, with issues related to data security, consent, and potential surveillance.</li>
<li><strong>Resource:</strong> <a href="https://www.weforum.org/agenda/2020/04/contact-tracing-apps-covid19-coronavirus-surveillance-privacy/">Contact Tracing Apps: A New Battle for Privacy</a></li>
</ul></li>
<li><strong>YouTube’s Algorithmic Recommendation of Extremist Content:</strong>
<ul>
<li><strong>Description:</strong> Instances where YouTube’s recommendation algorithm unintentionally promoted extremist content, raising concerns about the role of algorithms in spreading misinformation and radicalization.</li>
<li><strong>Resource:</strong> <a href="https://www.nytimes.com/2018/03/10/opinion/sunday/youtube-politics-radical.html">How YouTube’s Algorithm Distorts Reality</a></li>
</ul></li>
<li><strong>Health Insurance Premiums Based on Predictive Analytics:</strong>
<ul>
<li><strong>Description:</strong> Concerns about the use of predictive analytics in setting health insurance premiums, potentially leading to discrimination against individuals based on predicted future health risks.</li>
<li><strong>Resource:</strong> <a href="https://www.congress.gov/bill/116th-congress/senate-bill/1108/text">The Algorithmic Accountability Act</a></li>
</ul></li>
<li><strong>Uber’s Use of Greyball to Evade Authorities:</strong>
<ul>
<li><strong>Description:</strong> Uber’s use of the Greyball program to identify and evade law enforcement, illustrating ethical concerns about the misuse of data and technology for regulatory evasion.</li>
<li><strong>Resource:</strong> <a href="https://www.nytimes.com/2017/03/03/technology/uber-greyball-program-evade-authorities.html">How Uber Deceives the Authorities Worldwide</a></li>
</ul></li>
</ol>
</section>
<section id="some-ways-to-address-ethical-issues-in-data-science" class="level2">
<h2 class="anchored" data-anchor-id="some-ways-to-address-ethical-issues-in-data-science">Some Ways to Address Ethical Issues in Data Science</h2>
<ol type="1">
<li><strong>Ethical AI Guidelines by Major Tech Companies:</strong>
<ul>
<li><strong>Description:</strong> Many major tech companies, including Google, Microsoft, and IBM, have developed ethical AI guidelines to promote responsible and ethical use of AI technologies.</li>
<li><strong>Resource:</strong> <a href="https://ai.google/principles/">Google AI Principles</a>, <a href="https://www.microsoft.com/en-us/ai/responsible-ai">Microsoft AI Principles</a>, <a href="https://www.ibm.com/cloud/learn/ai-ethics">IBM AI Ethics</a></li>
</ul></li>
<li><strong>Fairness, Accountability, and Transparency in Machine Learning (FAT/ML) Research Community:</strong>
<ul>
<li><strong>Description:</strong> The FAT/ML community focuses on developing research and best practices to address issues related to fairness, accountability, and transparency in machine learning systems.</li>
<li><strong>Resource:</strong> <a href="https://www.fatml.org/">FAT/ML</a></li>
</ul></li>
<li><strong>Algorithmic Impact Assessments:</strong>
<ul>
<li><strong>Description:</strong> Proposals for conducting impact assessments to evaluate the potential social, ethical, and legal implications of algorithms before their deployment.</li>
<li><strong>Resource:</strong> <a href="https://datasociety.net/pubs/ia/DataAndSociety_Algorithmic_Accountability_Primer_2016.pdf">Algorithmic Impact Assessments: A Practical Framework for Public Policy</a></li>
</ul></li>
<li><strong>Open Source and Transparent AI Models:</strong>
<ul>
<li><strong>Description:</strong> Advocacy for transparency in AI models, making the source code and model architecture openly available to encourage scrutiny and accountability.</li>
<li><strong>Resource:</strong> <a href="https://www.openai.com/charter/">OpenAI’s Charter</a></li>
</ul></li>
<li><strong>Data Ethics Frameworks for Organizations:</strong>
<ul>
<li><strong>Description:</strong> Development and implementation of data ethics frameworks by organizations to guide responsible data collection, processing, and usage.</li>
<li><strong>Resource:</strong> <a href="https://docs.google.com/presentation/d/1p_Y4IbEn9Uy9zcpqkKGdF7de7xMdfL6HM9Vr1x66iGY/edit#slide=id.g42054eb3e3_0_0">The Data Ethics Canvas</a></li>
</ul></li>
<li><strong>Privacy-Preserving Technologies:</strong>
<ul>
<li><strong>Description:</strong> Adoption of privacy-preserving technologies, such as differential privacy and homomorphic encryption, to protect individuals’ sensitive information in data processing.</li>
<li><strong>Resource:</strong> <a href="https://privacytools.seas.harvard.edu/publications/differential-privacy-primer-non-technical-audience">Differential Privacy: A Primer for a Non-Technical Audience</a></li>
</ul></li>
<li><strong>AI Ethics Committees and Review Boards:</strong>
<ul>
<li><strong>Description:</strong> Establishment of independent committees and review boards to evaluate and ensure the ethical implications of AI and data science projects.</li>
<li><strong>Resource:</strong> <a href="https://towardsdatascience.com/ai-ethics-boards-addressing-bias-and-fairness-in-ai-systems-2e5efb36da34">AI Ethics Boards: Addressing Bias and Fairness in AI Systems</a></li>
</ul></li>
<li><strong>Responsible Data Science Education:</strong>
<ul>
<li><strong>Description:</strong> Integration of ethics education into data science curricula to ensure that practitioners are equipped with the knowledge and awareness of ethical considerations.</li>
<li><strong>Resource:</strong> <a href="https://datascienceethics.github.io/">Data Science Ethics Resources</a></li>
</ul></li>
<li><strong>Legislation and Regulations:</strong>
<ul>
<li><strong>Description:</strong> Introduction of laws and regulations aimed at governing the ethical use of data and AI technologies, such as the European General Data Protection Regulation (GDPR).</li>
<li><strong>Resource:</strong> <a href="https://gdpr.eu/">EU General Data Protection Regulation (GDPR)</a></li>
</ul></li>
<li><strong>Community Engagement and Stakeholder Involvement:</strong></li>
</ol>
<ul>
<li><strong>Description:</strong> Involving diverse stakeholders, including affected communities, in the development and deployment of data science projects to ensure a more inclusive and ethical decision-making process.</li>
<li><strong>Resource:</strong> <a href="https://medium.com/s/story/community-engagement-in-data-science-f1e7b4bc4a0e">Community Engagement in Data Science</a></li>
</ul>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div id="quarto-reuse" class="quarto-appendix-contents"><div>CC BY-NC-SA 4.0</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>